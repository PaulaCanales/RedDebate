<!DOCTYPE html>
{% extends 'base.html' %}
{% load static %}
<html>
{% block content %}
<link rel="stylesheet" type='text/css' href="{% static '/css/perfil.css' %}" >
<div class="container-profile">
  <header>
  </header>
  <main>
    <div class="row">
      <div class="left col-lg-4">
        <div class="photo-left">
          <img class="photo" src="{% static 'img/RDLogo05.png' %}"/>
          <div class="active"></div>
        </div>
        <h4 class="name">{{usuario.username}}</h4>
        <p class="info">{{ usuario.email }}</p>
        <div class="stats row">
          <div class="stat col-xs-6">
            <h4 class="name">{{alias.reputacion}}</h4>
            <p class="info">Reputación</p>
          </div>
          <div class="stat col-xs-6">
            <h4 class="name">{{stats.debates}}</h4>
            <p class="info">Publicaciones</p>
          </div>
        </div>
        <div class="stats row">
          <div class="stat col-xs-4">
            <p class="number-stat">{{stats.posturas}}</p>
            <p class="desc-stat">Posturas</p>
          </div>
          <div class="stat col-xs-4">
            <p class="number-stat">{{stats.triunfos}}</p>
            <p class="desc-stat">Triunfos</p>
          </div>
          <div class="stat col-xs-4">
            <p class="number-stat">{{stats.derrotas}}</p>
            <p class="desc-stat">Derrotas</p>
          </div>
        </div>
        <div class="stats row">
          <div class="stat col-xs-4">
            <p class="number-stat">{{stats.argumentos}}</p>
            <p class="desc-stat">Argumentos </p>
          </div>
          <div class="stat col-xs-4">
            <p class="number-stat">{{stats.mejor_arg}}</p>
            <p class="desc-stat">Mejor</p>
          </div>
          <div class="stat col-xs-4">
            <p class="number-stat">{{stats.peor_arg}}</p>
            <p class="desc-stat">Peor</p>
          </div>
        </div>
        <!-- <p class="desc">{{ usuario.date_joined }}</p> -->
      </div>
        <div class="right col-lg-8">
          <div class="main">
          <main>
            <input id="tab1" type="radio" name="tabs" checked>
            <label for="tab1">Información</label>

            <input id="tab2" type="radio" name="tabs">
            <label for="tab2">Mis Listas</label>

            <section id="content1">
              <h4 class="fullname">{{usuario.get_full_name}}</h4>
              <p class="desc-datos">Username</p>
              <p class="datos">{{usuario.username}}</p>
              <p class="desc-datos">Miembro desde</p>
              <p class="datos">{{usuario.date_joined}}</p>
              <p class="desc-datos">Alias</p>
              <p class="datos">{{alias.alias}} <a id = 'boton_alias' onclick='javascript:form_perfil("boton_alias", "formulario_alias" );'> <span class="glyphicon glyphicon-edit" aria-hidden="true" ></span> </a></p>
              <p class="desc-datos">Personas alcanzadas</p>
              <p class="datos">20</p>
              {% if alias_form.alias.errors %}
              <div class="alert alert-danger">
                  {{ alias_form.alias.errors }}
                  <script>
                  $(document).ready(function(){
                  		try{document.getElementById("boton_alias").click();}
                  		catch(err){}});
                  </script>
              </div>
              {% endif %}
              <div id='formulario_alias' style="display: none;" >
                <form method="POST" class="post-form" enctype="multipart/form-data">{% csrf_token %}
      						<div class="fieldWrapper">
                      {{ alias_form.non_field_errors }}
                      {{ alias_form.user }}
      						    {{ alias_form.alias }}
      						</div>
                  <button name="nuevo_alias" type="submit" class="btn btn-index">Cambiar</button>
                  <label type="button" onclick='cancelar_form("boton_alias", "formulario_alias" );'> Cancelar </label>
                </form>
               </div>
            </section>
            <section id="content2">
               <div class="panel-group">
                {% for lista in listado %}
                <div class="panel panel-lista">
                  <div class="panel-heading">
                      <div class="row panel-title">
                        <div class="col-md-10">
                          <a data-toggle="collapse" href="#{{lista.nombre}}">{{lista.nombre}}</a>
                        </div>
                        <div class="col-md-1">
                          <a href="{% url 'lista' lista.id %}"> <span class="glyphicon glyphicon-edit" aria-hidden="true"></span></a>
                        </div>
                        <div class="col-md-1">
                          <form method="post" action= "{% url 'perfil' id_usr=usuario.id  %}" enctype="multipart/form-data" onsubmit="return confirm('¿Seguro que desea eliminar la lista?');">{% csrf_token %}
                            <input type="hidden" value="{{ lista.id }}" name="id_lista">
                            <button type="submit"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
                          </form>
                        </div>
                      </div>
                  </div>
                  <div id="{{lista.nombre}}" class="panel-collapse collapse">
                    <div class="panel-body">
                      {% for usr in listado_usuarios %}
                      {% ifequal lista.id usr.lista_id %}
                        <p><a href="{% url 'perfil' id_usr=usr.nombre.id %}">{{usr.nombre}}</a></p>
                      {% endifequal %}
                      {% endfor %}
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
              <a id = 'boton_lista' onclick='javascript:form_perfil("boton_lista", "formulario_lista" );'><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Agregar Lista </a>
              <div id='formulario_lista' style="display: none;" >
                 <form method="POST" class="post-form" enctype="multipart/form-data">{% csrf_token %}
                 <div class="fieldWrapper">
                   {{ lista_form.non_field_errors }}
                   {{ lista_form.nombre }}
                 </div>
                 <button name="nuevaLista" type="submit" class="btn btn-index">Agregar</button>
                 <label type="button" onclick='cancelar_form("boton_lista", "formulario_lista");'> Cancelar </label>
               </form>
              </div>
             </section>
          </main>
        </div>
        </div>
      </div>
    </div>
  </main>
</div>

{% endblock content %}

</html>
