<!DOCTYPE html>

<div class="datagrid{{postura}}">
  <table id="Tabla_Argumentos{{postura}}">
    <tr><thead>
      	<th> # </th>
      	<th> {{frase}} </th>
      	<!--<th> </th> -->
      	<th> <div style="float:right"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> <label id="label_num_post{{postura}}"> {{num_post}} </label> </div> </th>
    </thead></tr>
    {% for arg in comentario %}
      <tr>
        <td style="border-bottom: #fff;">
          {% ifequal arg.exist_rate.0 'no' %}
            <button id="sumar_val{{arg.id_arg}}" type="submit" class="btn btn-rateArg{{postura}}" onclick='javascript:rateArg("{{arg.id_arg}}","positive","{{debate.id_debate}}");'>
            <span class="glyphicon glyphicon-triangle-top" aria-hidden="true"></span>
            </button>
          {% else %}
            <button id="nulo_sumar_val{{arg.id_arg}}" type="submit" class="btn btn-nulo{{postura}}" onclick='javascript:rateArg("{{arg.id_arg}}","null-positive","{{debate.id_debate}}");'>
            <span class="glyphicon glyphicon-triangle-top" aria-hidden="true"></span>
            </button>
          {% endifequal %}
        </td>
        <td id="bordeTabla{{postura}}" rowspan="3"><!-- comentario-->
            <p><a href="{% url 'perfil' id_arg=arg.id_arg %}"><p1>{{arg.owner_arg}}:</p1></a> {{arg.text}}</p>
        </td>
        <td style="border-bottom: #fff; text-align: center;"> <!-- boton editar/rebatir-->
      		<div style="float:right">
            <button id="bot_rebatir{{postura}}" type="submit" class="btn btn-args{{postura}}" data-whatever="{{arg.counterargs}}" onclick='javascript:mostrar_modal("respuesta_modal{{postura}}{{arg.id_arg}}","{{arg.id_arg}}","{{arg.counterargs}}","{{postura}}");' >
              {{ arg.counterargs|length }} <span class="glyphicon glyphicon-comment"  ></span>
            </button>
          </div>
        </td>

          <div id="respuesta_modal{{postura}}{{arg.id_arg}}" class="modal">
            <div class="modal-content">
              <h3><span class="close" onclick="cerrar_modal('respuesta_modal{{postura}}{{arg.id_arg}}')">&times;</span>
              <span class="glyphicon glyphicon-comment"></span> Redebates</h3>
                <div id="descripcion_argumento">
                  <p1>{{arg.owner_arg}}</p1> argumentó...
                  <h4>"{{arg.text}}"</h4>
                </div>
                  <div id="respuestas" class="modal-body">
                    {% for counterarg in arg.counterargs%}
                      <div class="dialogbox">
                        <div class="body">
                          <span class="tip tip-up"></span>
                          <div class="message">
                            <p><a href="{% url 'perfil' id_arg=arg.id_arg id_reb=counterarg.id %}"><p1>{{counterarg.owner}}:</p1></a> {{counterarg.text}}</p>
                          </div>
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                  {% ifequal counterargs_type 1 %}
                    {% ifequal counterarg_target frase %}
                      {% if arg.can_counterarg %}
                      <div id="form_rebatir" class="modal-footer">
                        <form method="POST" class="post-form" enctype="multipart/form-data">{% csrf_token %}
                          {{counterarg_form.as_p}}
                          <input type="hidden" value="{{arg.id_arg}}" name="id_argument{{postura}}">
                          <button name="counterargument{{postura}}"type="submit" class="btn btn-deb{{postura}}">Responder</button>
                        </form>
                      </div>
                      {% else %}
                      <div>Ya no puedes contraargumentar</div>
                      {% endif %}
                    {% endifequal %}
                  {% else %}
                    {% if arg.can_counterarg %}
                    <div id="form_rebatir" class="modal-footer">
                      <form method="POST" class="post-form" enctype="multipart/form-data">{% csrf_token %}
                        {{counterarg_form.text}}
                        {{counterarg_form.owner_type}}
                        <input type="hidden" value="{{arg.id_arg}}" name="id_argument{{postura}}">
                        <button name="counterargument{{postura}}"type="submit" class="btn btn-deb{{postura}}">Responder</button>
                      </form>
                    </div>
                    {% else %}
                    <div>Ya no puedes contraargumentar</div>
                    {% endif %}
                  {% endifequal %}
            </div>
          </div>

      </tr>
      <tr>
        <td style="border-bottom: #fff; text-align: center;" id="val{{arg.id_arg}}"> {{arg.rate}}</td>
        {% ifequal arg.post_usr_arg arg.11%}
        <td style="border-bottom: #fff; text-align: center; display:none" id="change{{arg.id_arg}}"> <span class="glyphicon glyphicon-transfer" aria-hidden="true"></span> </td>
        {% else %}
        <td style="border-bottom: #fff; text-align: center; display:block" id="change{{arg.id_arg}}"> <span class="glyphicon glyphicon-transfer" aria-hidden="true"></span> </td>
        {% endifequal %}
      </tr>
      <tr id="bordeTabla{{postura}}">
        <td>
          {% ifequal arg.exist_rate.1 'no' %}
          <button id="quitar_val{{arg.id_arg}}" type="submit" class="btn btn-rateArg{{postura}}" onclick='javascript:rateArg("{{arg.id_arg}}","negative","{{debate.id_debate}}");'>
          <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span>
          </button>
          {% else %}
          <button id="nulo_quitar_val{{arg.id_arg}}" type="submit" class="btn btn-nulo{{postura}}" onclick='javascript:rateArg("{{arg.id_arg}}","null-negative","{{debate.id_debate}}");'>
          <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span>
          </button>
          {% endifequal %}
        </td>
        <td><div style="float:right">
          {% ifequal arg.owner_arg_id user %}
            <form id="eliminar_arg" method="post" action= "{% url 'showDebate' debate.id_debate %}" enctype="multipart/form-data" onsubmit="return confirm('¿Seguro que desea eliminar el argument?');">{% csrf_token %}
              <input type="hidden" value="{{ arg.id_arg }}" name="id_arg_delete">
              <input type="hidden" value="{{ debate.id_debate }}" name="id_deb_arg_eliminar">
              <button type="submit" class="btn btn-args{{postura}}" > <span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
            </form>
          {% else %}
            <button id="bot_reportar" type="submit" class="btn btn-args{{postura}}" onclick='' ><span class="glyphicon glyphicon-bullhorn"></span></button>
          {%endifequal%}
        </div></td>
      </tr>
    {% empty %}
      <tr><td class="vacio"> </td></tr>
    {% endfor %}
  </table>
</div>
